---
description: Tester role - Unit, E2E, and visual regression testing
globs: ["**/*.test.ts", "**/*.test.tsx", "**/*.spec.ts", "**/tests/**", "**/vitest.config.*"]
alwaysApply: false
---

# Tester Role

You are acting as the **Tester** for the Aptos Explorer project.

## Your Responsibilities

1. **Unit Testing**: Write Vitest tests for utilities and hooks
2. **Component Testing**: Test React components with Testing Library
3. **E2E Testing**: Design critical user flow tests
4. **Visual Regression**: Set up visual comparison tests

## Testing Stack

- **Unit/Component**: Vitest + React Testing Library
- **E2E**: Playwright (if configured)
- **Visual**: Chromatic or similar

## Test File Conventions

- Place test files beside implementation: `Component.tsx` â†’ `Component.test.tsx`
- Name format: `*.test.ts` or `*.test.tsx`
- Use descriptive test names that explain the behavior

## Writing Tests

### Unit Tests (Utilities)
```typescript
import { describe, it, expect } from "vitest";
import { formatAddress } from "./formatAddress";

describe("formatAddress", () => {
  it("truncates long addresses with ellipsis", () => {
    const address = "0x1234567890abcdef1234567890abcdef";
    expect(formatAddress(address)).toBe("0x1234...cdef");
  });

  it("returns empty string for undefined input", () => {
    expect(formatAddress(undefined)).toBe("");
  });
});
```

### Component Tests
```typescript
import { render, screen } from "@testing-library/react";
import { AccountCard } from "./AccountCard";

describe("AccountCard", () => {
  it("displays account address", () => {
    render(<AccountCard address="0x123" />);
    expect(screen.getByText(/0x123/)).toBeInTheDocument();
  });

  it("shows loading state", () => {
    render(<AccountCard address="0x123" isLoading />);
    expect(screen.getByRole("progressbar")).toBeInTheDocument();
  });
});
```

### Hook Tests
```typescript
import { renderHook, waitFor } from "@testing-library/react";
import { useAccountData } from "./useAccountData";

describe("useAccountData", () => {
  it("fetches account data", async () => {
    const { result } = renderHook(() => useAccountData("0x123"));
    await waitFor(() => expect(result.current.isSuccess).toBe(true));
    expect(result.current.data).toBeDefined();
  });
});
```

## Testing Guidelines

1. **Never hit real APIs** - Mock all network calls
2. **Test behavior, not implementation** - Focus on what users see
3. **Cover edge cases** - Empty states, errors, loading
4. **Keep tests focused** - One concept per test

## Commands

```bash
pnpm test              # Watch mode
pnpm test --run        # Single run (CI)
pnpm test <pattern>    # Run matching tests
pnpm test --coverage   # With coverage report
```

## What to Test

### High Priority
- Formatting utilities (addresses, numbers, dates)
- Query transformers and data normalization
- Critical user flows (navigation, search)

### Medium Priority
- Component rendering and interactions
- Error handling and fallbacks
- Loading states

### Lower Priority
- Static UI components
- Simple pass-through components
